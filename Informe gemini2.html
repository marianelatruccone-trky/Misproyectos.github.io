<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe Cooperativa La Soberana - Análisis Cualitativo</title>
    <style>
        :root {
            --primary-green: #2f5d50;
            --danger: #d32f2f;
            --light-bg: #f4f7f6;
            --white: #ffffff;
            --text: #444;
        }

        body { font-family: 'Segoe UI', sans-serif; background-color: var(--light-bg); padding: 20px; color: var(--text); }
        .container { max-width: 1000px; margin: 0 auto; background: var(--white); padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        header { text-align: center; border-bottom: 3px solid var(--primary-green); margin-bottom: 30px; padding-bottom: 10px; }
        
        .selector-section { background: #eef2f1; padding: 15px; border-radius: 8px; margin-bottom: 25px; }
        select { padding: 10px; border-radius: 5px; border: 1px solid var(--primary-green); font-size: 16px; cursor: pointer; }

        .grid-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: #fff; border: 1px solid #ddd; border-left: 5px solid var(--primary-green); padding: 15px; border-radius: 8px; text-align: center; }
        .stat-card p { font-size: 20px; font-weight: bold; margin: 10px 0 0; }
        
        .negative { color: var(--danger) !important; }
        .positive { color: var(--primary-green) !important; }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; margin-bottom: 25px; }
        th { background: var(--primary-green); color: white; padding: 12px; text-align: left; }
        td { padding: 12px; border-bottom: 1px solid #eee; }

        .analysis-box { background: #fff; padding: 25px; border-radius: 8px; border: 1px solid #ddd; line-height: 1.6; }
        .qualitative-text { margin-top: 20px; padding: 20px; background: #f0f4f3; border-radius: 8px; border-left: 5px solid var(--secondary-green); }
        .qualitative-text h3 { margin-top: 0; color: var(--primary-green); }
        
        #resumenCualitativo { display: none; } /* Solo se muestra en el resumen trimestral */
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Informe de Resultados 4to Trimestre 2025</h1>
        <p>Cooperativa de Trabajo La Soberana</p>
    </header>

    <div class="selector-section">
        <label><strong>Seleccionar Periodo:</strong></label>
        <select id="periodo" onchange="actualizar()">
            <option value="oct">Octubre 2025</option>
            <option value="nov">Noviembre 2025</option>
            <option value="dic">Diciembre 2025</option>
            <option value="trim">RESUMEN TRIMESTRAL TOTAL</option>
        </select>
    </div>

    <div class="grid-stats">
        <div class="stat-card">
            <h3>Ingresos</h3>
            <p id="ing"></p>
        </div>
        <div class="stat-card">
            <h3>Egresos</h3>
            <p id="egr" class="negative"></p>
        </div>
        <div class="stat-card">
            <h3>Resultado Neto</h3>
            <p id="res"></p>
        </div>
        <div class="stat-card">
            <h3>Incidencia Eg/Ing</h3>
            <p id="inc"></p>
        </div>
    </div>

    <div class="analysis-box">
        <h2 id="titulo"></h2>
        <p id="desc"></p>
        <table>
            <thead>
                <tr>
                    <th>Rubro Principal</th>
                    <th>Monto Acumulado</th>
                    <th>% sobre Egresos</th>
                </tr>
            </thead>
            <tbody id="tabla"></tbody>
        </table>

        <div id="resumenCualitativo" class="qualitative-text">
            <h3>Análisis Cualitativo del Gasto</h3>
            <p>El análisis del cuarto trimestre revela una estructura de egresos dominada por el sostenimiento del capital humano. El rubro de <strong>Retornos y Sueldos</strong> constituye el eje central de la salida de fondos, representando casi un <strong>80% del total de egresos</strong>, lo que refleja el carácter social de la cooperativa pero también la presión que ejerce sobre el margen operativo.</p>
            <p>En segundo orden, la <strong>Compra de Insumos</strong> mostró una incidencia significativa (aprox. 15%), con un pico de inversión en diciembre que sugiere una preparación para el ciclo productivo siguiente. Finalmente, la carga impositiva y los gastos bancarios, aunque menores en volumen, fueron determinantes en meses críticos como noviembre, donde la combinación de estos factores llevó la incidencia de egresos por encima de la capacidad de generación de ingresos del periodo.</p>
        </div>
    </div>
</div>

<script>
    const db = {
        oct: {
            t: "Análisis Octubre 2025",
            i: "$13.365.000", e: "$16.711.000", r: "-$3.346.000", inc: "125.03%",
            d: "Déficit operativo: los egresos superaron la facturación en un 25%.",
            filas: [["Retornos y Cargas", "$12.450.000", "74.5%"], ["Insumos y Producción", "$2.861.000", "17.1%"], ["Otros Gastos", "$1.400.000", "8.4%"]]
        },
        nov: {
            t: "Análisis Noviembre 2025",
            i: "$16.050.000", e: "$18.667.000", r: "-$2.617.000", inc: "116.30%",
            d: "Tendencia deficitaria por alta carga de impuestos y retornos sobre ingresos.",
            filas: [["Sueldos y Retornos", "$15.150.000", "81.2%"], ["Impuestos Pagados", "$2.295.000", "12.3%"], ["Insumos", "$1.222.000", "6.5%"]]
        },
        dic: {
            t: "Análisis Diciembre 2025",
            i: "$20.734.000", e: "$21.804.000", r: "-$1.070.000", inc: "105.16%",
            d: "Mejoría en la recaudación, aunque persistió un saldo negativo ajustado.",
            filas: [["Sueldos y Aguinaldos", "$16.500.000", "75.7%"], ["Compra Insumos", "$4.804.000", "22.0%"], ["Gastos Varios", "$500.000", "2.3%"]]
        },
        trim: {
            t: "Resumen Consolidado Trimestral",
            i: "$50.149.000", e: "$57.182.000", r: "-$7.033.000", inc: "114.02%",
            d: "Balance total deficitario: La cooperativa operó con un desfasaje acumulado de $7.033.000 durante el trimestre.",
            filas: [["Total Retornos", "$44.100.000", "77.1%"], ["Total Insumos", "$8.887.000", "15.5%"], ["Impuestos y Otros", "$4.195.000", "7.4%"]]
        }
    };

    function actualizar() {
        const v = document.getElementById('periodo').value;
        const data = db[v];

        document.getElementById('ing').innerText = data.i;
        document.getElementById('egr').innerText = data.e;
        document.getElementById('res').innerText = data.r;
        document.getElementById('res').className = "negative";
        document.getElementById('inc').innerText = data.inc;
        document.getElementById('inc').className = "negative";

        document.getElementById('titulo').innerText = data.t;
        document.getElementById('desc').innerText = data.d;

        const tbody = document.getElementById('tabla');
        tbody.innerHTML = data.filas.map(f => `<tr><td>${f[0]}</td><td>${f[1]}</td><td class="negative">${f[2]}</td></tr>`).join('');

        // Mostrar/Ocultar el texto cualitativo solo en el resumen
        const cualitativo = document.getElementById('resumenCualitativo');
        cualitativo.style.display = (v === 'trim') ? 'block' : 'none';
    }

    window.onload = actualizar;
</script>
</body>
</html>